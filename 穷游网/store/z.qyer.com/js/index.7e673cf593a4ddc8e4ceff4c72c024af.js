!function($,f){var Unslider=function(){function nav(name,html){"dot"==name?(html='<ol class="dots">',$.each(_.li,function(index){html+='<li class="'+(index==_.i?name+" active":name)+'">'+ ++index+"</li>"}),html+="</ol>"):(html='<div class="',html=html+name+'s">'+html+name+' prev">'+_.o.prev+"</div>"+html+name+' next">'+_.o.next+"</div></div>"),_.el.addClass("has-"+name+"s").append(html).find("."+name).click(function(){var me=$(this);me.hasClass("dot")?_.stop().to(me.index()):me.hasClass("prev")?_.prev():_.next()})}var _=this;_.o={speed:500,delay:3e3,init:0,pause:!f,loop:!f,keys:f,dots:f,arrows:f,prev:"&larr;",next:"&rarr;",fluid:f,starting:f,complete:f,items:">ul",item:">li",easing:"swing",autoplay:!0},_.init=function(el,o){_.o=$.extend(_.o,o),_.el=el,_.ul=el.find(_.o.items),_.max=[0|el.outerWidth(),0|el.outerHeight()],_.li=_.ul.find(_.o.item).each(function(index){var me=$(this),width=me.outerWidth(),height=me.outerHeight();width>_.max[0]&&(_.max[0]=width),height>_.max[1]&&(_.max[1]=height)});var o=_.o,ul=_.ul,li=_.li,len=li.length;return _.i=0,el.css({width:_.max[0],height:li.first().outerHeight(),overflow:"hidden"}),ul.css({position:"relative",left:0,width:100*len+"%"}),o.fluid?li.css({"float":"left",width:100/len+"%"}):li.css({"float":"left",width:_.max[0]+"px"}),o.autoplay&&setTimeout(function(){0|o.delay&&(_.play(),o.pause&&el.on("mouseover mouseout",function(e){_.stop(),"mouseout"==e.type&&_.play()}))},0|o.init),o.keys&&$(document).keydown(function(e){var key=e.which;37==key?_.prev():39==key?_.next():27==key&&_.stop()}),o.dots&&nav("dot"),o.arrows&&nav("arrow"),o.fluid&&$(window).resize(function(){_.r&&clearTimeout(_.r),_.r=setTimeout(function(){var styl={height:li.eq(_.i).outerHeight()},width=el.outerWidth();ul.css(styl),styl.width=Math.min(Math.round(width/el.parent().width()*100),100)+"%",el.css(styl),li.css({width:width+"px"})},50)}).resize(),($.event.special.move||$.Event("move"))&&el.on("movestart",function(e){e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY?e.preventDefault():el.data("left",_.ul.offset().left/el.width()*100)}).on("move",function(e){var left=100*e.distX/el.width();_.ul.css("left",el.data("left")+left+"%"),_.ul.data("left",left)}).on("moveend",function(e){var left=_.ul.data("left");if(Math.abs(left)>30){var i=left>0?_.i-1:_.i+1;(i<0||i>=len)&&(i=_.i),_.to(i)}else _.to(_.i)}),_},_.to=function(index,callback){_.t&&(_.stop(),_.play());var o=_.o,el=_.el,ul=_.ul,li=_.li,target=(_.i,li.eq(index));if(target.length&&!(index<0)||o.loop!=f){target.length||(index=0),index<0&&(index=li.length-1),target=li.eq(index);var speed=callback?5:0|o.speed,easing=o.easing,obj={height:target.outerHeight()};ul.queue("fx").length||(el.find(".dot").eq(index).addClass("active").siblings().removeClass("active"),$.isFunction(o.starting)&&!callback&&o.starting(el,target),el.animate(obj,speed,easing)&&ul.animate($.extend({left:"-"+index+"00%"},obj),speed,easing,function(data){_.i=index,$.isFunction(o.complete)&&!callback&&o.complete(el,target)}))}},_.play=function(){_.t=setInterval(function(){_.to(_.i+1)},0|_.o.delay)},_.stop=function(){return _.t=clearInterval(_.t),_},_.next=function(){return _.stop().to(_.i+1)},_.prev=function(){return _.stop().to(_.i-1)}};$.fn.unslider=function(o){var len=this.length;return this.each(function(index){var me=$(this),key="unslider"+(len>1?"-"+ ++index:""),instance=(new Unslider).init(me,o);me.data(key,instance).data("key",key)})},Unslider.version="1.0.0"}(jQuery,!1);
!function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){function update(){var counter=0;elements.each(function(){var $this=$(this);if(!settings.skip_invisible||$this.is(":visible"))if($.abovethetop(this,settings)||$.leftofbegin(this,settings));else if($.belowthefold(this,settings)||$.rightoffold(this,settings)){if(++counter>settings.failure_limit)return!1}else $this.trigger("appear"),counter=0})}var $container,elements=this,settings={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return options&&(undefined!==options.failurelimit&&(options.failure_limit=options.failurelimit,delete options.failurelimit),undefined!==options.effectspeed&&(options.effect_speed=options.effectspeed,delete options.effectspeed),$.extend(settings,options)),$container=settings.container===undefined||settings.container===window?$window:$(settings.container),0===settings.event.indexOf("scroll")&&$container.bind(settings.event,function(){return update()}),this.each(function(){var self=this,$self=$(self);self.loaded=!1,$self.attr("src")!==undefined&&$self.attr("src")!==!1||$self.is("img")&&$self.attr("src",settings.placeholder),$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings)}$("<img />").bind("load",function(){var original=$self.attr("data-"+settings.data_attribute);$self.hide(),$self.is("img")?$self.attr("src",original):$self.css("background-image","url('"+original+"')"),$self[settings.effect](settings.effect_speed),self.loaded=!0;var temp=$.grep(elements,function(element){return!element.loaded});if(elements=$(temp),settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings)}}).attr("src",$self.attr("data-"+settings.data_attribute))}}),0!==settings.event.indexOf("scroll")&&$self.bind(settings.event,function(){self.loaded||$self.trigger("appear")})}),$window.bind("resize",function(){update()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&$window.bind("pageshow",function(event){event.originalEvent&&event.originalEvent.persisted&&elements.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){update()}),this},$.belowthefold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop():$(settings.container).offset().top+$(settings.container).height(),fold<=$(element).offset().top-settings.threshold},$.rightoffold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.width()+$window.scrollLeft():$(settings.container).offset().left+$(settings.container).width(),fold<=$(element).offset().left-settings.threshold},$.abovethetop=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollTop():$(settings.container).offset().top,fold>=$(element).offset().top+settings.threshold+$(element).height()},$.leftofbegin=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollLeft():$(settings.container).offset().left,fold>=$(element).offset().left+settings.threshold+$(element).width()},$.inviewport=function(element,settings){return!($.rightoffold(element,settings)||$.leftofbegin(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0})}})}(jQuery,window,document);
$(function(){require(["web_qui_quiautocomplete"],function(QuiAutoComplete){function getDefalutHTML(){var max=6,size=0,str="<ul>",historyList=getHistoryList(),hotList=getHotList();return str+=historyList.join(""),size=historyList.length,hotList=hotList.slice(0,max-size),str+=hotList.join(""),str+="</ul>"}function getHotList(){var ary=[];return ary.push('<li><a href="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword=日本" data-bn-ipg="zsj-search-hot"><em>热门搜索</em><span class="name">日本</span></a></li>'),ary.push('<li><a href="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword=清迈" data-bn-ipg="zsj-search-hot"><em>热门搜索</em><span class="name">清迈</span></a></li>'),ary.push('<li><a href="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword=海岛" data-bn-ipg="zsj-search-hot"><em>热门搜索</em><span class="name">海岛</span></a></li>'),ary.push('<li><a href="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword=法国" data-bn-ipg="zsj-search-hot"><em>热门搜索</em><span class="name">法国</span></a></li>'),ary.push('<li><a href="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword=台湾" data-bn-ipg="zsj-search-hot"><em>热门搜索</em><span class="name">台湾</span></a></li>'),ary.push('<li><a href="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword=韩国" data-bn-ipg="zsj-search-hot"><em>热门搜索</em><span class="name">韩国</span></a></li>'),ary}function getHistoryList(){for(var ary=[],cache=getHistoryCache(),val="",url="",i=0;i<cache.length&&(val=cache[i].val,url="//z.qyer.com/all_0_0_0_0_0_0_0/?keyword="+encodeURIComponent(val),ary.push('<li><a href="'+url+'" data-bn-ipg="zsj-search-history"><em>历史记录</em><span class="zwui-iconfont icon-clock"></span><span class="name">'+val+"</span></a></li>"),2!=i);i++);return ary}function saveHistoryCache(val,url){var ary=getHistoryCache(),item={val:val||"",url:url||""};if(""!==val){ary.length>10&&(ary.length=10);for(var i=0;i<ary.length;i++)ary[i].val==val&&ary.splice(i,1);window.localStorage&&(ary.unshift(item),window.localStorage.zuishijie_search_history=JSON.stringify(ary))}}function getHistoryCache(){var ary=[];return window.localStorage&&window.localStorage.zuishijie_search_history&&(ary=JSON.parse(window.localStorage.zuishijie_search_history)),ary}var defalutHTML=getDefalutHTML();new QuiAutoComplete({target:"#zwhomeSearchText",parent:"#zwhomeSearchs",width:"440",zindex:99,dataSource:"/?action=new_search",submitOnEnter:!1,defalutHTML:defalutHTML,onItemSelected:function(elm){var url=$(elm).attr("data-url"),val=$(elm).attr("data-value");saveHistoryCache(val,url),window.location.href=url},onIndexChanged:function(index,elm){},onKeyEnter:function(){},contentHTML:function(data){var html="";return $.each(data.keywords,function(index,val){val.title;html+='<li class="qui-autoComplete-item" data-value="'+val.title+'" data-url="'+val.url+'" data-bn-ipg="zsj-search-suggest"><em>'+val.type+'</em><span class="name">'+val.title+"</span></li>"}),html}});$("#zwhomeSearchs").on("submit",function(event){var ipt_val=$("#zwhomeSearchText").val();return ipt_val=ipt_val.trim(),""!==ipt_val&&void saveHistoryCache(ipt_val)})})}),$(function(){function contentShow(index){window.clearTimeout(timer),timer=window.setTimeout(function(){"number"==typeof index&&(select_index=index),$zwCategory.css("width","1160px"),$zwCategoryList.children("li").removeClass("active").eq(select_index).addClass("active"),$zwCategoryContents.show();var $contentCurrent=$zwCategoryContentAry.hide().eq(select_index).show();$contentCurrent.find(".zw-home-category-subject img").each(function(i,elm){var src=$(elm).attr("data-original");$(elm).attr("src",src)}),$contentCurrent.find(".zw-home-category-ztpic img").each(function(i,elm){var src=$(elm).attr("data-original");$(elm).attr({src:src,height:"auto"})})},100)}function contentHide(){window.clearTimeout(timer),timer=window.setTimeout(function(){$zwCategory.css("width",""),$zwCategoryList.children("li").removeClass("active"),$zwCategoryContents.hide()},100)}var $zwCategory=$("#zwCategory"),$zwCategoryList=$("#zwCategoryList"),$zwCategoryContents=$("#zwCategoryContents"),$zwCategoryContentAry=$(".zw-home-category-content"),timer=null,select_index=0;$zwCategoryList.on("mouseenter","li",function(event){var index=$(this).index();contentShow(index)}).on("mouseleave","li",function(event){contentHide()}),$zwCategoryContents.on("mouseenter",function(event){contentShow()}).on("mouseleave",function(event){contentHide()})}),$(function(){var $homeSliders=$("#homeSliders"),$homeSlidersItem=$homeSliders.find(".zw-home-sliders-list li");if($homeSlidersItem.size()>1){var slidey=$homeSliders.unslider({keys:!0,dots:!0,fluid:!0}),slideyData=slidey.data("unslider");$homeSliders.find(".btn-arrow").on("click",function(event){var fn=this.className.split(" ")[1];slideyData[fn]()}),$homeSliders.find(".dots").on("click","li",function(event){var i=$(this).index();slideyData.to(i)})}}),$(function(){function setAnim(x){$tdsaleList.eq(index).removeClass(x+" animated").addClass(x+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass(x+" animated")})}var $tdsaleBtn=$("#tdsaleBtn"),$tdsaleContent=$("#tdsaleContent");$tdsaleList=$tdsaleContent.children(),max=$tdsaleList.size()-1,index=0,$tdsaleBtn.on("click",function(event){index=index==max?0:index+1,$tdsaleList.hide().eq(index).show().find(".pics img").each(function(i,elm){var src=$(elm).attr("data-original");$(elm).attr("src",src)}),setAnim("fadeIn")})}),$(function(){function setAnim(x,elm){$(elm).removeClass(x+" animated").addClass(x+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass(x+" animated")})}var $tags=$(".zw-home-tags");$tags.on("mouseenter","li",function(event){var $this=$(this),$contents=$this.parent().parent().next(),$list=$contents.children(),currentClass="active",index=$this.index();$this.hasClass(currentClass)||($this.addClass(currentClass).siblings().removeClass(currentClass),$list.hide().eq(index).show().find(".pics img").each(function(i,elm){var src=$(elm).attr("data-original");$(elm).attr("src",src)}),setAnim("fadeIn",$list[index]))})}),$(function(){$("img.lazy").lazyload()});
$(function(){var floater={$floater:$(".zw-module-sidefloater-wrap"),$footer:$(".zw-footer"),$totop:$("#gototop"),wh:$(window).height(),init:function(){this.bind_event()},bind_event:function(){var that=this;this.$totop.on("click",function(){$("html,body").animate({scrollTop:"0"},500)}),$(window).on("scroll",function(evt){that.window_scroll(this)})},window_scroll:function(aEl){var st=$("body").scrollTop()||$(document).scrollTop()||$("html").scrollTop(),offset=320;st>offset?(this.$floater.is(":hidden")&&this.$floater.fadeIn(300),this.$footer.offset()&&st+200+this.$floater.height()>=this.$footer.offset().top?this.$floater.css({position:"absolute",top:this.$footer.offset().top-this.$floater.height()}):this.$floater.css({position:"fixed",top:"200px"})):this.$floater.is(":visible")&&this.$floater.fadeOut("fast"),st>760?this.$totop.is(":hidden")&&this.$totop.fadeIn(400):this.$totop.is(":visible")&&this.$totop.fadeOut(400)}};floater.init()});